CREATE DATABASE pannpyoethudb;

//fixed requirement, imglogo_url are added
CREATE TABLE Job_tbl (
    job_id INT AUTO_INCREMENT PRIMARY KEY,
    job_title VARCHAR(100) NOT NULL,
    description TEXT,
    requirement VARCHAR (225),
    location VARCHAR(100),
    posted_date DATE,
    job_type ENUM('Full Time', 'Part Time') NOT NULL,
    org_name VARCHAR(100),
    job_attachment VARCHAR(255) ,
    imglogo_url VARCHAR(225) 
);

//fixed fee,type,lang,img_url,icon,popular,upcoming are replaced & added 
CREATE TABLE Course_tbl (
    course_id INT AUTO_INCREMENT PRIMARY KEY,
    course_name VARCHAR(255) NOT NULL,
    fee VARCHAR(50) ,	
    type VARCHAR (100),	
    language VARCHAR (20),
    paid_status BOOLEAN NOT NULL,
    instructor_name VARCHAR(255),
    image_url VARCHAR (255) NULL,	
    icon_url VARCHAR (255) NULL,		
    is_popular BOOLEAN DEFAULT 0,	
    is_upcoming BOOLEAN DEFAULT 0,
    most_popular BOOLEAN DEFAULT 0	

);

//created a new table for course discount display box
CREATE TABLE course_discounts (
    discount_id INT AUTO_INCREMENT PRIMARY KEY,
    discount_percent INT NOT NULL,      -- 25, 50 etc.
    start_date DATE NOT NULL,
    end_date DATE NOT NULL
);




CREATE TABLE Counsellor_tbl (
    counsellor_id   INT AUTO_INCREMENT PRIMARY KEY,
    counsellor_name VARCHAR(50)    NOT NULL,
    specialization  VARCHAR(255),
    degree          VARCHAR(20),
    email           VARCHAR(30)    NOT NULL,
    phone           VARCHAR(20),
    experiences     VARCHAR(500),
    image_url       VARCHAR(255)   NULL     -- NEW: filename or relative path to image
);



CREATE TABLE User_tbl (
  user_id       INT AUTO_INCREMENT PRIMARY KEY,
  user_name     VARCHAR(50),
  email         VARCHAR(30) UNIQUE NOT NULL,
  password_hash VARCHAR(100) NOT NULL,
  role          VARCHAR(15),
  phone         VARCHAR(20)  NULL,
  profile_path  VARCHAR(255) NULL,
  FOREIGN KEY (course_id) REFERENCES Course_tbl(course_id)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (job_id) REFERENCES Job_tbl(job_id)
    ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO User_tbl
  (email, password_hash, role)
VALUES
  ('admin@gmail.com', MD5('admin123'), 'admin');


ALTER TABLE user_tbl
  MODIFY role VARCHAR(15) NOT NULL DEFAULT 'user';

UPDATE user_tbl
SET role = 'user'
WHERE role IS NULL OR role = '';






CREATE TABLE Appointment_tbl (
    appointment_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    counsellor_id INT NOT NULL,
    appointment_date DATE,
    appointment_time TIME,
    description Text,
    appointment_status ENUM ('Confirmed', 'Cancelled', 'Completed'),
    FOREIGN KEY (user_id) REFERENCES User_tbl(user_id)
        ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (counsellor_id) REFERENCES Counsellor_tbl(counsellor_id)
        ON DELETE CASCADE ON UPDATE CASCADE
);
-- add 'Pending' as an allowed enum value and make its default 'Pending'
ALTER TABLE Appointment_tbl
  MODIFY appointment_status ENUM('Pending','Confirmed','Cancelled','Completed') 
  NOT NULL DEFAULT 'Pending';



CREATE TABLE Login_tbl (
    login_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    user_name VARCHAR(50),
    password_hash VARCHAR(100) NOT NULL,
    email VARCHAR(30)    NOT NULL,     
    role VARCHAR(15),
    last_login DATETIME,
    INDEX idx_login_email (email),    
    FOREIGN KEY (user_id)
      REFERENCES User_tbl(user_id)
      ON DELETE CASCADE
      ON UPDATE CASCADE
);
ALTER TABLE `Login_tbl`
  ADD COLUMN `session_id` VARCHAR(128) NULL AFTER `user_id`,
  ADD COLUMN `ip_address` VARCHAR(45) NULL AFTER `session_id`,
  ADD COLUMN `user_agent` VARCHAR(255) NULL AFTER `ip_address`,
  ADD COLUMN `last_active` DATETIME NULL AFTER `user_agent`;

ALTER TABLE `Login_tbl` ADD INDEX (`session_id`);





CREATE TABLE User_course_tbl (
    user_id INT NOT NULL,
    course_id INT NOT NULL,
    PRIMARY KEY (user_id, course_id),
    FOREIGN KEY (user_id) REFERENCES User_tbl(user_id)
        ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (course_id) REFERENCES Course_tbl(course_id)
        ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE `Enrollment_tbl` (
  `enrollment_id` INT AUTO_INCREMENT PRIMARY KEY,
  `user_id` INT NOT NULL,
  `course_id` INT NOT NULL,
  `enrollment_date` DATE NOT NULL,
  `payment_status` ENUM('pending','confirm','reject') NOT NULL DEFAULT 'pending',
  INDEX (`user_id`),
  INDEX (`course_id`),
  CONSTRAINT `fk_enrollment_user` FOREIGN KEY (`user_id`) REFERENCES `User_tbl`(`user_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `fk_enrollment_course` FOREIGN KEY (`course_id`) REFERENCES `Course_tbl`(`course_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ;







CREATE TABLE `Payment_tbl` (
  `payment_id` INT AUTO_INCREMENT PRIMARY KEY,
  `enrollment_id` INT NOT NULL,
  `amount` DECIMAL(10,2) NOT NULL,
  `payment_date` DATE DEFAULT NULL,
  `payment_method` VARCHAR(50) DEFAULT NULL,
  `payment_status` ENUM('pending','confirm','reject') NOT NULL DEFAULT 'pending',
  `payment_receipt` VARCHAR(255) DEFAULT NULL,
  INDEX (`enrollment_id`),
  CONSTRAINT `fk_payment_enrollment` FOREIGN KEY (`enrollment_id`)
    REFERENCES `Enrollment_tbl`(`enrollment_id`) ON DELETE CASCADE ON UPDATE CASCADE
);





CREATE TABLE Country_tbl (
    country_id INT AUTO_INCREMENT PRIMARY KEY,
    country_name VARCHAR(100) NOT NULL
);

CREATE TABLE University_tbl (
    university_id INT AUTO_INCREMENT PRIMARY KEY,
    university_name VARCHAR(100) NOT NULL,
    country_id INT NOT NULL,
    FOREIGN KEY (country_id) REFERENCES Country_tbl(country_id)
);

CREATE TABLE Scholarship_tbl (
  scholarship_id   INT AUTO_INCREMENT PRIMARY KEY,
  title            VARCHAR(100)    NOT NULL,
  description      TEXT            NULL,
  logo_url         VARCHAR(255)    NULL,               -- NEW: logo image URL
  coverage         TEXT            NULL,
  country          VARCHAR(50)     NOT NULL,           -- NEW: country name
  apply_link       VARCHAR(255)    NULL,
  deadline         VARCHAR(100)    NULL,
  intake_season    VARCHAR(50)     NULL,
  degree_level     VARCHAR(50)     NULL,
  type             VARCHAR(50)     NULL,
  eligibility      TEXT            NULL
);




CREATE TABLE FavouriteScholarship_tbl (
    user_id INT,
    scholarship_id INT,
    PRIMARY KEY (user_id,scholarship_id),
    FOREIGN KEY (user_id) REFERENCES User_tbl(user_id),
    FOREIGN KEY (scholarship_id) REFERENCES Scholarship_tbl(scholarship_id)
);


CREATE TABLE FieldOfStudy_tbl (
    field_id INT AUTO_INCREMENT PRIMARY KEY,
    field_name VARCHAR(100) NOT NULL
);

CREATE TABLE ScholarshipField_tbl (
    scholarship_id INT,
    field_id INT,
    PRIMARY KEY (scholarship_id, field_id),
    FOREIGN KEY (scholarship_id) REFERENCES Scholarship_tbl(scholarship_id),
    FOREIGN KEY (field_id) REFERENCES FieldOfStudy_tbl(field_id)
);


CREATE TABLE Payment_tbl (
    payment_id INT AUTO_INCREMENT PRIMARY KEY,
    enrollment_id INT NOT NULL,
    amount DECIMAL(10, 2),
    payment_date DATE,
    payment_method VARCHAR(50),
    payment_status BOOLEAN,
    FOREIGN KEY (enrollment_id) REFERENCES Enrollment_tbl(enrollment_id)
    	ON DELETE CASCADE ON UPDATE CASCADE
);


INSERT INTO Counsellor_tbl (
  counsellor_name,
  specialization,
  degree,
  email,
  phone,
  experiences,
  image_url
) VALUES
(
  'Cathy Doll',
  'Academic planning, course registration, scholarships',
  'B.A. in Guidance & Counselling',
  'cathy.doll@pannpyoethu.edu.mm',
  '95 9 123 456 789',
  '200+ counselling sessions; Helped with registration, major selection, scholarships; Empathetic advising and tracking',
  'Cathy.png'
),
(
  'Mercy Donan',
  'Major selection, career fairs, academic mentorship',
  'B.A. in Education',
  'mercy.donan@pannpyoethu.edu.mm',
  '95 9 987 654 321',
  '4+ years supporting students; Organized events and fairs; Strategic advising',
  'Mercy.jpg'
),
(
  'David Johnson',
  'University apps, study skills, transitions',
  'B.A. in Education',
  'david.johnson@pannpyoethu.edu.mm',
  '95 9 555 123 456',
  '10 years of academic advising; Led workshops for study skills',
  'David.jpg'
),
(
  'Linda Mae',
  'First‑gen support, transitions, long‑term planning',
  'B.A. in Psychology',
  'linda.mae@pannpyoethu.edu.mm',
  '95 9 777 888 999',
  'Support for first‑gen students; Community college experience',
  'Linda.jpg'
),
(
  'Sophia Lwin',
  'Retention, intervention, internships',
  'B.A. in Human Services',
  'sophia.lwin@pannpyoethu.edu.mm',
  '95 9 444 222 111',
  '6+ years supporting student success; NGO and business internship collaborations',
  'Sophia.jpg'
),
(
  'Michael Tun',
  'Resume help, career pathway, adult learners',
  'B.A. in Sociology',
  'michael.tun@pannpyoethu.edu.mm',
  '95 9 222 333 444',
  '8+ years advising and coaching; Mock interviews and resume sessions',
  'Michael.jpg'
);INSERT INTO Counsellor_tbl (
  counsellor_name,
  specialization,
  degree,
  email,
  phone,
  experiences,
  image_url
) VALUES
(
  'Cathy Doll',
  'Academic planning, course registration, scholarships',
  'B.A. in Guidance & Counselling',
  'cathy.doll@pannpyoethu.edu.mm',
  '95 9 123 456 789',
  '200+ counselling sessions; Helped with registration, major selection, scholarships; Empathetic advising and tracking',
  'Cathy.png'
),
(
  'Mercy Donan',
  'Major selection, career fairs, academic mentorship',
  'B.A. in Education',
  'mercy.donan@pannpyoethu.edu.mm',
  '95 9 987 654 321',
  '4+ years supporting students; Organized events and fairs; Strategic advising',
  'Mercy.jpg'
),
(
  'David Johnson',
  'University apps, study skills, transitions',
  'B.A. in Education',
  'david.johnson@pannpyoethu.edu.mm',
  '95 9 555 123 456',
  '10 years of academic advising; Led workshops for study skills',
  'David.jpg'
),
(
  'Linda Mae',
  'First‑gen support, transitions, long‑term planning',
  'B.A. in Psychology',
  'linda.mae@pannpyoethu.edu.mm',
  '95 9 777 888 999',
  'Support for first‑gen students; Community college experience',
  'Linda.jpg'
),
(
  'Sophia Lwin',
  'Retention, intervention, internships',
  'B.A. in Human Services',
  'sophia.lwin@pannpyoethu.edu.mm',
  '95 9 444 222 111',
  '6+ years supporting student success; NGO and business internship collaborations',
  'Sophia.jpg'
),
(
  'Michael Tun',
  'Resume help, career pathway, adult learners',
  'B.A. in Sociology',
  'michael.tun@pannpyoethu.edu.mm',
  '95 9 222 333 444',
  '8+ years advising and coaching; Mock interviews and resume sessions',
  'Michael.jpg'
);






INSERT INTO Scholarship_tbl
  (title, description, coverage, apply_link, deadline,
   intake_season, degree_level, type, eligibility,
   country, logo_url)
VALUES
  (
    'MEXT Japanese Studies Scholarship 2026',
    'One‑year scholarship for undergraduates to study Japanese language and culture in Japan',
    'Tuition, monthly stipend, travel expenses',
    'https://www.nashville.us.emb-japan.go.jp/itpr_en/00_000307.html',
    'Application: January 2026; Deadline: TBD; Exam: TBD; Interview: TBD',
    'October 2026',
    'Undergraduate',
    'Government scholarship',
    'Must be an undergraduate student at a university outside Japan, majoring in Japanese language or culture. Must meet age limits and academic requirements. Applications typically open the winter before the scholarship year.',
    'Japan',
    'MEXT.jpg'
  ),
  (
    'Study in Italy Program for Myanmar Students',
    'Support and scholarship opportunities for Myanmar students wishing to study at Italian universities. Includes guidance on enrollment, visa, tuition, and eligibility for fee reductions and scholarships.',
    'Tuition reductions, university scholarships, housing benefits; free Declarations of Value when required.',
    'https://ambyangon.esteri.it/en/servizi-consolari-e-visti/servizi-per-il-cittadino-straniero/studying-in-italy/',
    'Varies by university and program',
    'Academic Year 2025–2026',
    'Undergraduate, Graduate',
    'Government support & university scholarships',
    'Myanmar students with a minimum 12 years of schooling (or alternative conditions) applying to Italian universities. Language proficiency in Italian or English required. Income‑based fee reduction available upon proof. Declaration of Value required.',
    'Italy',
    'ItalyScholar.png'
  ),
  (
    'Octavius Catto Scholarship',
    'A no‑debt, tuition‑free scholarship at Community College of Philadelphia with stipends, academic resources, and holistic student support to empower low‑income Philadelphians.',
    'Tuition, all course materials, up to $1,600 stipend/semester, coaching, tutoring, career workshops, childcare, housing support.',
    'https://www.ccp.edu/admission-aid/paying-college/scholarships/octavius-catto-scholarship',
    'No separate application; apply via CCP admissions + FAFSA',
    'Fall & Spring Semesters (Year‑round)',
    'Associate',
    'Community college scholarship',
    'New/first‑time CCP students, transfers with ≤30 credits, or returning students with 2.0+ GPA. Must be Philadelphia resident 12+ months, attend full‑time (12+ credits/term), have HS diploma/GED, FAFSA SAI ≤ $8,000 (undocumented accommodations), and place college‑ready or one level below in English & Math.',
    'United States',
    'community_COPF.jpg'
  ),
  (
    'Türkiye Scholarships – Bachelor' 's Program',
    'Scholarships for undergraduate students in various fields in Türkiye.',
    'Tuition, 4,500 TL/month stipend, accommodation, health insurance, 1‑year Turkish course, flights.',
    'https://www.turkiyeburslari.gov.tr/en',
    'Typically opens Dec–Feb',
    'Fall',
    'Bachelor’’s',
    'Government scholarship',
    'Open to international students. Must verify field equivalence in home country.',
    'Turkey',
    'TürkiyeScholarships.png'
  ),
  (
    'Chevening Scholarships',
    'UK government scholarship for one‑year master’s programs.',
    'Tuition, living allowance, travel costs, additional grants.',
    'https://www.chevening.org/scholarships/who-can-apply/',
    'Opens Aug 2025; Closes Nov 2025',
    'Fall 2026',
    'Master’s',
    'Government scholarship',
    'International emerging leaders with UK university offers and strong leadership potential.',
    'United Kingdom',
    'cheveningscholarships.jpg'
  ),
  (
    'DAAD Helmut‑Schmidt Masters Scholarship',
    'Postgraduate scholarship in public policy & governance in Germany.',
    'Tuition waiver, monthly stipend.',
    'https://www.daad.de/go/en/stipa57692564',
    '31 July 2025 (annual)',
    'Sept/Oct 2026',
    'Master’s',
    'Merit‑based',
    'Open to Myanmar and other developing‑country students with relevant degrees and leadership potential.',
    'Germany',
    'DAAD.jpg'
  ),
  (
    'MOFA Taiwan Scholarship',
    'Taiwan Ministry of Foreign Affairs scholarship for Bachelor’s & Master’s studies.',
    'Tuition waiver, NT$25,000–30,000 monthly stipend.',
    'https://en.mofa.gov.tw/cp.aspx?n=1325',
    'Varies (typically Spring)',
    'Fall 2026',
    'Bachelor’s, Master’s',
    'Government scholarship',
    'Open to non‑Taiwanese nationals with degree qualifications and language proficiency.',
    'Taiwan',
    'MOFA.jpg'
  ),
  (
    'Jardine Scholarship',
    'Prestigious full scholarship to Oxford/Cambridge for Asia‑Pacific students.',
    'Full tuition, college fees, living expenses.',
    'jardineschoalrship.png',
    'Oct 2025 (varies by region)',
    'Fall 2026',
    'Undergraduate',
    'Foundation scholarship',
    'From Asia‑Pacific; outstanding academic and leadership record.',
    'United Kingdom',
    'jardineschoalrship.png'
  ),
  (
    'University of Windsor Global Conflict Relief Bursary',
    'Bursary for international students affected by global conflicts.',
    'CAD 10,000.',
    'https://www.uwindsor.ca/studentawards/international-students-scholarships',
    'Oct 15, 2025 (may extend)',
    'Fall 2025',
    'Undergraduate',
    'Bursary',
    'International undergrads; must demonstrate conflict‑related hardship.',
    'Canada',
    'University_of_Windsor_Global_Conflict_Relief_Bursary.png'
  ),
  (
    'UWindsor Open Entrance Scholarship',
    'Automatic merit‑based scholarship for incoming international undergraduate students at University of Windsor.',
    'CAD 1,000.',
    'https://www.uwindsor.ca/studentawards/international-students-scholarships',
    'TBD (2025‑26 cycle)',
    'Fall 2025',
    'Undergraduate',
    'Entrance scholarship',
    'International undergrad; automatically considered based on admission average.',
    'Canada',
    'University_of_Windsor_Global_Conflict_Relief_Bursary.png'
  );


//Data for course_tbl
INSERT INTO Course_tbl
 (course_name, fee, type, language, image_url, icon_url) 
VALUES
 ( 'Time Management Course', 
   'Free', 
   'Paper format', 
   'Burmese', 
   'Time management course.jpg', 
   'clock-removebg-preview.png'
),

( 'Communication Course',
   'Free',
   'Paper format',
   'Burmese',
   'Communication course.jpg',
   'loudspeaker-removebg-preview.png'
),

( 'Problem-Solving Skill Course',
  'Free',
  'Paper format',
  'Burmese',
  'Problem-solving course.jpg',
  'puzzle-removebg-preview.png'
),

( 'Gender Studies Course',
  'Free',
  'Paper format',
  'Burmese',
  'gender.jpg',
  'people-removebg-preview.png'
),

( 'Critical Thinking Course',
  'Free',
  'Paper format',
  'English',
  'critical thinking.jpg',
  'brain_exercise-removebg-preview.png'
),

( 'ICT Project Management Course',
  '30000 kyats',
  'Video lectures',
  'English',
  'project management.jpg',
  'project-removebg-preview.png'
),

( 'Psychological First Aid',
  'Free',
  'Paper format',
  'English',
  'Psychological first aid.jpg',
  'heart-removebg-preview.png'
),

( 'Collaboration Course',
  '30000 kyats',
  'Video lectures',
  'English',
  'collaboration course.jpg',
  'teamwork-removebg-preview.png'
);

//Modify popular course
UPDATE course_tbl
SET is_popular = 1
WHERE course_id = 1;


 //need to set is_upcoming to value 1 in DB  //Data for up coming course
INSERT INTO Course_tbl (course_name, icon_url, is_upcoming)   VALUES
( 'Programming',
  'programming.png',
  1
 ),

( 'Languages',
  'languages.png',
  1
),

( 'Music Lessons',
  'musicpic.png', 
  1
);

//insert data for course discounts tbl
INSERT INTO course_discounts (discount_percent, start_date, end_date)
VALUES
(25, '2025-08-01', '2025-08-02');

//data for job table
INSERT INTO Job_tbl (org_name, job_title, job_type, location, description, requirement, job_attachment, imglogo_url )
VALUES
( 'Shwe Mingalar Spa', 
  'Beauty Aesthetic Manager',
  'full time',
  'Yangon',
  ' Oversee spa operations and staff, manage client relationships, ensure high-quality  services.',
  'Oversee spa operations and staff. Experience in beauty industry required.',
  'https://www.myjobs.com.mm/job/beauty-aesthetic-manager-78732',
  'shwe mingalar spa.png'  
),

( 'CHID Bank',
  'Manager Research & Development',
  'full time',
  'Yangon',
  'Manage, develop and collect data for related project with team.',
  'Excellent research writing, analytical and presentation skills are required.',
  'https://www.jobnet.com.mm/job/manager-research-section-chid-bank/114527',
  'chid bank.png'
), 

( 'Icon Electric Shop',
  'Chinese-Myanmar Translator',
  'full time',
  'Myawaddy',
  'Need to translate office related document.Work as a translator between clients and local.',
  'Excel in Chinese-Myanmar four skills.Translation experience are required.',
  'https://www.myjobs.com.mm/job/chinese-myanmar-translator-78837',
  'icon electronic shop.png'
),

( 'Icon Electric Shop',
  'Mechanic Technician',
  'full time',
  'Myawaddy',
  'Manage and test the quality of electronic products in the shop.',
  'Experience with handling electronic products and gedgets is required.',
  'https://www.myjobs.com.mm/job/mechanic-technician-78836',
  'icon electronic shop.png'
),

( 'UNOPS',
  'Programme Management Associate',
  'full time',
  'Mandalay',
  'Responsible for coordinating logistics for field visits, meetings, and events, managing assets.',
  'Communication, reporting, and providing translation support are required.',
  'https://www.myjobs.com.mm/job/programme-management-associate-78827 ',
  'UNOPS.png'
),
 
( 'UNOPS',
  'Monitoring and Evaluation Senior Officer',
  'full time',
  'Mandalay',
  'Help design and implement M&E systems, provide technical support to partners, and contribute.',
  'Social science research, data analysis skills are required.',
  'https://www.myjobs.com.mm/job/monitoring-and-evaluation-senior-officer-78828 ',
  'UNOPS.png'
),
( 'Women Transforming Myanmar',
  'Finance Assistant',
  'full time',
  'Yangon',
  'Maintain and assist in the process of financial related documents.',
  'Proficiency in MS Excel and basic in accounting software are required.',
  'https://www.myjobs.com.mm/job/finance-assistant-78815 ',
  'women transforming myanmar.png'
),

( 'Women Transforming Myanmar',
  'Project Coordinator',
  'full time',
  'Yangon',
  'Support, prepare and coordinate and explore new idea related to the project',
  'Strong organizational and coordination skills are required.',
  'https://www.myjobs.com.mm/job/project-coordinator-78814 ',
  'women transforming myanmar.png'
),

( 'Women Transforming Myanmar',
  'Social Media Coordinator Office',
  'full time',
  'Yangon',
  'Support, communicate and share and explore new idea related to the project.',
  'Strong organizational and social marketing skills are required.',
  'https://www.myjobs.com.mm/job/social-media-coordinator-78813',
  'women transforming myanmar.png'
),

( 'Moshi Moshi Japanese Language Center',
  'Office Admin Manager',
  'full time',
  'Yangon',
  'Managing work related documents of the center. ',
  'Computer skill and basic Japanese skills are required.',
  'https://www.myjobs.com.mm/job/office-admin-manager-78807 ',
  'moshi moshi japanese lang center.png'
);









